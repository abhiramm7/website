<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="../../stylesheets/style.css">
		<meta name="author" content="Abhiram Mullapudi">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	</head>
	<body>
		<div class="master-container">
			<div class='header-container'>
				<div class='header-logo'>
					<div class='logo'><img src='../../data/images/logo.png' style="height:99%;width:99%" alt="Random Storms Logo"/></div>
				</div>
				<div class='header-menu'>
					<div class='usr'><a href="../../index.html" style="color:black">./usr</a></div>
					<div class='log'><a href="../logs.html" style="color:black">./log</a></div>
					<div class='archives'><a href="../../archives/archives.html" style="color:black">./archives</a></div>
					<div class='untitled'>./untitled</div>
				</div>
			</div>	
			<hr/>

			<div class="log-content-container">
				<header id="title-block-header">
					<h1 class="title">Using pyswmm in M1</h1>
															<p class="author">Abhiram Mullapudi</p>
															<p class="date">December 27, 2021</p>
									</header>
				<div class='blog-body'>
				<h1 id="pyswmm-in-m1">pyswmm in M1</h1>
<p>pyswmm does not yet officially support M1. This post outlines the
compilation procedure of swmm-python locally on M1 Macs. swmm-python
acts as an interface between EPA-SWMM’s simulation engine and pyswmm. We
would need this library for running pyswmm in M1 Macs. I would strongly
recommend using a python virtual environment for this installation.</p>
<p>As of Dec 29th, 2021, OpenMP is causing issues with the compilation
process. So, for now, I have disabled it. I will update the post once I
find a way to compile swmm-python with OpenMP<a href="#fn1"
class="footnote-ref" id="fnref1"
role="doc-noteref"><sup>1</sup></a>.</p>
<p>Please refer to the cmake file in <a
href="https://github.com/abhiramm7/swmm-python/blob/dev/swmm-toolkit/CMakeLists.txt">https://github.com/abhiramm7/swmm-python/blob/dev/swmm-toolkit/CMakeLists.txt</a></p>
<h2 id="swmm-python">swmm-python</h2>
<pre class="shell"><code>brew install ninja
brew install swig</code></pre>
<pre class="shell"><code>git clone https://github.com/abhiramm7/swmm-python/tree/dev/swmm-toolkit
cd swmm-toolkit
git submodule update --init --recursive
python -m pip install -r build-requirements.txt
python setup.py build
python setup.py bdist_wheel
python -m pip install dist/swmm_toolkit-0.8.2-cp39-cp39-macosx_11_0_arm64.whl</code></pre>
<h2 id="pyswmm">pyswmm</h2>
<pre class="shell"><code>python -m pip install pyswmm</code></pre>
<p>Notes:</p>
<ul>
<li>ninja is a light weight build system: <a
href="https://ninja-build.org">ninja-build.org</a></li>
<li>swig is an interface better C/C++ and languages like python: <a
href="http://www.swig.org/exec.html">swig</a></li>
</ul>
<section id="footnotes" class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>We are technically compiling swmm-solver, which is
EPA-SWMM’s simulation engine.<a href="#fnref1" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
				</div>
			</div>
			<hr/>
			<div class='footer-container'>
				<p style="font-size:small;">
				Font design and elements inspired from  <a href="https://www.johnsonbanks.co.uk/work/mozilla"> Johnson Banks/<em>mozilla</em></a> <br>
				Theme inspired from <a href="https://github.com/jonbarron/website"> Jon Barron</a>
				</p>
			</div>
		</div>
	</body>
</html>
